# -------------------
# General Warnings
# -------------------

# Internal Clocks
msg report item -status verified -id directive-398 \
  -owner Max-Köhler -reviewer Javier-Valenzuela \
  -arg signal=pll_inst.altpll_component.clk_wire* \
  -comment "(Warning)Acknowledging the 3 pll outputs as non-port clock signals  {ExpectedCount = 3}"

msg report item -status verified -id directive-398 \
  -owner Max-Köhler -reviewer Javier-Valenzuela \
  -arg signal=pll_inst.altpll_component.cyclone3_inclk* \
  -comment "(Warning) Acknowledging the pll input used in the quartus library pll \
            as non-port clock signal.  {ExpectedCount = 1}"

msg report item -status verified -id directive-398 \
  -owner Max-Köhler -reviewer Javier-Valenzuela \
  -arg signal=pll_inst.altpll_component.pll_lock \
  -comment "(Warning) The pll library instantiates a mux for the clock outputs, which \
            is also detected as a clock {ExpectedCount = 1}"

# Module warnings
msg report item -status verified -id netlist-44 \
  -owner Max-Köhler -reviewer Javier-Valenzuela \
  -comment "(Warning)Suppressing warning caused by not having a clk domain assigned to \
            synchronizer input 'in' {ExpectedCount = 1}"

# Free-running synchronizers(Constant value on input warnings)
msg report item -status verified -id hcdc-76 \
  -owner Max-Köhler -reviewer Javier-Valenzuela \
  -arg signal=pll_ref_clk_en_sync.rst \
  -comment "(Warning)This synchronizer for this pll enable is always running, \
            hence we hard-code the rst to 0 {ExpectedCount = 1}"

msg report item -status verified -id hrdc-4 \
  -owner Max-Köhler -reviewer Javier-Valenzuela \
  -arg port=pll_ref_clk_en_sync.rst \
  -comment "(Warning)This warning is reported for the pll enable synchronizer \
            since the synchronizer module indicates that a reset signal is expected \
            on the rst input, but a constant was provided instead  {ExpectedCount = 1}"

msg report item -status verified -id hcdc-76 \
  -owner Max-Köhler -reviewer Javier-Valenzuela \
  -arg signal=clk50_reset_sync.rst \
  -comment "(Warning)This synchronizer for the clk50 version of the pll_locked \
            status is always running, as it serves as a reset for the logic in that \
            time domain {ExpectedCount = 1}"

msg report item -status verified -id hcdc-76 \
  -owner Max-Köhler -reviewer Javier-Valenzuela \
  -arg signal=clk40_reset_sync.rst \
  -comment "(Warning)This synchronizer for the clk40 version of the pll_locked \
            status is always running, as it serves as a reset for the logic in that \
            time domain {ExpectedCount = 1}"

msg report item -status verified -id hrdc-4 \
  -owner Max-Köhler -reviewer Javier-Valenzuela \
  -arg port=clk40_reset_sync.rst \
  -comment "(Warning)This warning is reported for the clk40_reset synchronizer \
            since the synchronizer module indicates that a reset signal is expected \
            on the rst input, but a constant was provided instead  {ExpectedCount = 1}"

msg report item -status verified -id hcdc-76 \
  -owner Max-Köhler -reviewer Javier-Valenzuela \
  -arg signal=ps_spi_input_sync_inst.rst \
  -comment "(Warning)This synchronizer for the PS SPI CS lines \
            is always running, we want to always forward the CS status {ExpectedCount = 1}"

msg report item -status verified -id hrdc-4 \
  -owner Max-Köhler -reviewer Javier-Valenzuela \
  -arg port=ps_spi_input_sync_inst.rst  \
  -comment "(Warning)This warning is reported for the PS SPI CS synchronizer \
            since the synchronizer module indicates that a reset signal is expected \
            on the rst input, but a constant was provided instead  {ExpectedCount = 1}"

msg report item -status verified -id hcdc-76 \
  -owner Max-Köhler -reviewer Javier-Valenzuela \
  -arg signal=reliable_reset_gen_inst.*.rst \
  -comment "(Warning) with the lack of an external reset, we use a reliable reset \
            primitive, which we want to use to reset logic after power-on. \
            Two warnings are generated by having a constant reset value, one for the \
            init signal, and another one for the internal counter {ExpectedCount = 2}"

msg report item -status verified -id hrdc-4 \
  -owner Max-Köhler -reviewer Javier-Valenzuela \
  -arg port=reliable_reset_gen_inst.*.rst  \
  -comment "(Warning)This warning is reported for the reliable reset synchronizers \
            since the synchronizer module indicates that a reset signal is expected \
            on the rst input, but a constant was provided instead  {ExpectedCount = 2}"

msg report item -status verified -id hcdc-76 \
  -owner Max-Köhler -reviewer Javier-Valenzuela \
  -arg signal=p*_spi_endpoint.spi_slave_async.data_sync_inst.rst \
  -comment "(Warning)This synchronizer is always running, hence we hard-code the rst to 0\
            It's used to indicate the clk50 domain that a SPI transaction has been \
            completely received. There's one warning for the PS slave and another one \
            for the PL SPI slave {ExpectedCount = 2}"

msg report item -status verified -id hrdc-4 \
  -owner Max-Köhler -reviewer Javier-Valenzuela \
  -arg port=p*_spi_endpoint.spi_slave_async.data_sync_inst.rst  \
  -comment "(Warning)This warning is reported for 'spi-data received' synchronizers \
            (PL and PS interfaces)since the synchronizer module indicates that a reset signal is expected \
            on the rst input, but a constant was provided instead  {ExpectedCount = 2}"

# Other constant inputs
msg report item -status verified -id hcdc-76 \
  -owner Max-Köhler -reviewer Javier-Valenzuela \
  -arg signal=reliable_reset_gen_inst.init_sync_inst.in \
  -comment "(Warning) The reliable_reset model synchronizes a '1' to the to initialize the counter\
            for the reliable reset {ExpectedCount = 1}"

msg report item -status verified -id hcdc-76 \
  -owner Max-Köhler -reviewer Javier-Valenzuela \
  -arg signal=cmi_control_hs.valid_a \
  -comment "(Warning) This handshake has the valid bit set constant to provide continuous \
            safe clock-crossing from the ps_spi interface to the clk40 domain(used in CMI core) {ExpectedCount = 1}"

# Questa CDC issues with IP
msg report item -status verified -id hcdc-42 \
  -owner Max-Köhler -reviewer Javier-Valenzuela \
  -comment "(Warning) Questa cdc presents an issue with the pll IP, it imports the \
            cached directives twice, and shoots a warning indicating that one of the instances \
            will be ignored. This affects 21 signals in the PLL IP. After consulting with James \
            Nicholson, fixing this would require not running both CDC and RDC in a single \
            session, but that would affect ni_report_summary(used in CMI core) {ExpectedCount = 21}"

msg report item -status verified -id hdl-238 \
  -owner Max-Köhler -reviewer Javier-Valenzuela \
  -comment "(Warning) Inferred reset points to a module reset declaration not properly\
            recognized(synchronizer reset marked as black-box) {ExpectedCount = 1}"

msg report item -status verified -id netlist-82 \
  -owner Max-Köhler -reviewer Javier-Valenzuela \
  -comment "(Warning) Warning generated by the existence of internal resets. Acknowledging \
            review of the listed internal resets. {ExpectedCount = 1}"

msg report item -status verified -id parser-285 \
  -owner Max-Köhler -reviewer Javier-Valenzuela \
  -comment "(Warning)There's 4 black-boxes inside the IP Library models, as well as
            6 signals with ports missing connections in the flash IP model\
            {ExpectedCount = 10}"

msg report item -status verified -id parser-47 \
  -owner Max-Köhler -reviewer Javier-Valenzuela \
  -comment "(Warning)Unresolved models inside the IP Library models.\
            {ExpectedCount = 4}"

# -----------------------------
# Clock Crossing Exceptions
# -----------------------------
cdc report item -status verified -owner Max-Köhler -reviewer Javier-Valenzuela \
  -scheme multi_bits -to p*_spi_endpoint.spi_slave_async.transmit_bits \
  -message "(Violation) There is a 8 sclk padding time that we use to ensure that any \
            ctrlport transactions will propagate and drive data_in way before it is needed. \
            This helps in being able to assert data_in_valid 5 clk domain clock cycles after the \
            falling edge of sclk, where transmit_word will be latched, making it so that the path \
            to transmit_bits has enough time to settle(2+ clk cycles) and act as synchronous to sclk.\
            This covers two violations, one for the PS interface, and another one for the PL interface\
            {ExpectedCount = 2}"

cdc report item -status verified -owner Max-Köhler -reviewer Javier-Valenzuela \
  -scheme multi_bits -from p*_spi_endpoint.spi_slave_async.received_word \
  -to p*_spi_endpoint.spi_slave_async.data_out \
  -message "(Violation) reception_complete_clk creates a logic cloud behind this flop that will be \
            safe when reception_complete_clk as the input to the flop will change synchronously to
            its time domain, and the input to this flop will not change until the next byte is received. \
            when received_word changes, even if the logic bubble behind this flop makes the flop \
            metastable, any bad data won't be propagated due to any distribution of the settled metastability \
            being gated by data_out_valid. This covers two violations, one for the PS interface, and another \
            one for the PL interface{ExpectedCount = 2}"

cdc report item -status verified -owner Max-Köhler -reviewer Javier-Valenzuela \
  -scheme async_reset_no_sync -from ps_spi_cs_n_decoded\[0\] \
  -message "(Violation) This violation is detected by the ps_spi_cs_n_decoded being synchronized \
            to clk250 and then used to clear flops in the PS_CPLD_SCLK domain. clk250 is 25 time faster than \
            PS_CPLD_SCLK, and the CS will reset signals in time for them to propagate safely in \
            the receiving clock domain. The clk250 synchronization is done to monitor stability in the line \
            and perform binary conversion. \
            This exceptions covers 3 paths (to receiver_reg, current_bit_index and data_request_sclk \
            in the SPI slave block for the PS interface) {ExpectedCount = 3}"

cdc report item -status verified -owner Max-Köhler -reviewer Javier-Valenzuela \
  -scheme async_reset -from ps_spi_cs_n_decoded\[0\] \
  -message "(Evaluation) This evaluation asks to verify if a synchronized signal should be \
            used as the asynchronous reset for a flop in the synchronized timed domain. \
            This is incorrectly classified as the signal in question(transmit_bits) is not in the \
            synchronized time domain(clk250) but rather sclk, and should have been categorized above.\
            Inspection was made Quartus RTL Viewer to validate that Quartus was routing the expected \
            clk an reset signals to this flop {ExpectedCount = 1}"

cdc report item -status verified -owner Max-Köhler -reviewer Javier-Valenzuela \
  -scheme no_sync -from ps_spi_cs_n_decoded\[0\] \
  -to PS_CPLD_MISO \
  -message "(Violation) This signal is clocked in the PS clock domain in the source,
            there is a shift register that ensures data stability on the line while
            also taking care of binary decoding of the CS lines. The shift register runs
            on a clock 25 times faster than the PS_CPLD_SCLK and the propagation of CS
            will happen by the time SPI transactions start, so the pass-through to this port
            should work synchronous to PS_CPLD_SCLK {ExpectedCount = 1}"

# -----------------------------
# Reset Crossing Exceptions
# -----------------------------
resetcheck report item -status verified -owner Max-Köhler -reviewer Javier-Valenzuela \
  -scheme reset_cdc_no_sync -reset ps_cs_n \
  -message "(Violation) Reset domain duplicate for the async_reset_no_sync violation. The \
            tx reset domain will settle before the rx-reset domain is taken out of reset, \
            and the rx-reset clock domain won't until after the rx-reset de-asserts {ExpectedCount = 3}"

resetcheck report item -status verified -owner Max-Köhler -reviewer Javier-Valenzuela \
  -scheme reset_cdc_sync -reset ps_cs_n \
  -message "(Evaluation) Duplicated from the async_reset clock crossing violation. This evaluation is similar \
            to the paths above, but detected as synchronous on the rx domain. it was verify that Quartus was \
            routing the reset to this flop as expected \
            {ExpectedCount = 1}"

resetcheck report item -status verified -owner Max-Köhler -reviewer Javier-Valenzuela \
  -scheme reset_dual_areset_sreset -reset reset_clk50 -check \
  -message "This exception is generated because the flash IP utilizes a synchronized reset \
            asynchronously. The synchronized version of the reset is used in the reconfiguration \
            engine and other various register endpoints. Even though this exceptions handles one \
            Caution item, the expected count is se to 0, as nicdc has an issue properly matching \
            paths to static checks{ExpectedCount = 0}"


